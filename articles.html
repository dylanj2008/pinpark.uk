<!-- articles.html -->
<!DOCTYPE HTML>
<!--
	Prologue by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>PinPark</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<!-- ‚úÖ Tab icon -->
		<link rel="icon" type="image/jpeg" href="pinicon.jpg" />

		<link rel="stylesheet" href="assets/css/main.css" />

		<style>
			/* ‚úÖ Make the blue cover part exactly 60px tall */
			#current.cover {
				height: 60px !important;
				min-height: 60px !important;
				padding: 0 !important;
			}
			#current.cover > .container {
				padding: 0 !important;
				margin: 0 !important;
			}
			#current.cover header,
			#current.cover h2,
			#current.cover p {
				margin: 0 !important;
				padding: 0 !important;
			}

			/* ‚úÖ PinPark hero tint */
			#current.cover:before,
			#current:before {
				background: linear-gradient(
					135deg,
					rgba(0, 173, 238, 0.78) 0%,
					rgba(255, 255, 255, 0.35) 50%,
					rgba(0, 138, 205, 0.78) 100%
				) !important;
			}

			/* ‚úÖ PinPark hero tint overlay */
			#current.cover {
				position: relative;
				overflow: hidden;
			}

			#current.cover::after {
				content: "";
				position: absolute;
				inset: 0;
				pointer-events: none;
				z-index: 0;

				background:
					radial-gradient(circle at 0% 100%,
						rgba(0, 173, 238, 0.8) 0%,
						rgba(0, 173, 238, 0.8) 22%,
						rgba(0, 173, 238, 0.6) 30%,
						rgba(0, 173, 238, 0.3) 38%,
						rgba(0, 173, 238, 0) 46.2%
					),
					radial-gradient(circle at 100% 0%,
						rgba(255, 255, 255, 0.10) 0%,
						rgba(255, 255, 255, 0.10) 16%,
						rgba(255, 255, 255, 0.07) 23%,
						rgba(255, 255, 255, 0.04) 30%,
						rgba(255, 255, 255, 0.02) 36%,
						rgba(255, 255, 255, 0) 41.8%
					),
					linear-gradient(
						135deg,
						rgba(0, 138, 205, 0.75) 0%,
						rgba(0, 138, 205, 0.75) 100%
					);
			}

			/* ‚úÖ keep your hero content above the tint */
			#current.cover > .container {
				position: relative;
				z-index: 1;
			}

			/* ‚úÖ Make PinPark logo 25% smaller total */
			#logo .image img {
				width: 75%;
				height: auto;
				transform: translateY(-10px);
			}

			/* ‚úÖ Center the PinPark logo horizontally in the sidebar column */
			#logo {
				text-align: center;
			}
			#logo .image {
				display: inline-block;
			}
			#logo .image img {
				display: block;
				margin: 0 auto;
			}

			/* ‚úÖ Ensure left nav icons visibly highlight when active */
			#nav ul li a.active span.icon:before,
			#nav ul li a.active-locked span.icon:before {
				color: #fff !important;
			}
			#nav ul li a.active,
			#nav ul li a.active-locked {
				color: #fff !important;
			}

			/* ‚úÖ Smooth fade for active tab highlight (0.1s in/out, no flash) */
			#nav ul li a,
			#nav ul li a:before,
			#nav ul li a:after,
			#nav ul li a span.icon:before {
				transition:
					background-color 0.1s ease,
					color 0.1s ease,
					opacity 0.1s ease,
					border-color 0.1s ease;
			}

			/* ‚úÖ Position page content like admin/terms.html (strip + heading + card) */
			#main .pinpark-under-strip {
				margin-top: 20px !important; /* was 120px */
				text-align: center;
			}
			#main .pinpark-under-strip img {
				max-width: 260px;
				width: 60%;
				height: auto;
				display: inline-block;
			}

			/* ‚úÖ Make "Current Article" the same distance from strip as admin */
			#main .pinpark-under-strip .articles-under-logo {
				margin-top: 40px !important;    /* was 100px */
				margin-bottom: 2em !important;
			}
			#main .pinpark-under-strip .articles-under-logo h2 {
				margin-top: 0 !important;
			}

			/* ‚úÖ Current Article paragraph: centered + 30px padding each side */
			#main .pinpark-under-strip .articles-paragraph {
				margin-top: 0 !important;
				padding-left: 30px !important;
				padding-right: 30px !important;
				box-sizing: border-box;
				text-align: center !important;
			}

			/* ‚úÖ Other Articles: remove template container max-width + padding so it can touch edges */
			#other .container {
				max-width: none !important;
				width: 100% !important;
				padding-left: 0 !important;
				padding-right: 0 !important;
			}

			/* ‚úÖ Other Articles paragraph: 30px padding each side */
			#other .other-paragraph {
				padding-left: 30px !important;
				padding-right: 30px !important;
				box-sizing: border-box;
			}

			/* ‚úÖ Other Articles list styling (matches admin layout, no icons) */
			.other-articles-list {
				list-style: none;
				margin: 0;
				padding: 0 30px 20px;
				box-sizing: border-box;
			}
			.other-articles-list li {
				border-bottom: 1px solid rgba(0, 0, 0, 0.08);
			}
			.other-articles-list li:last-child {
				border-bottom: none;
			}
			.other-articles-list a {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 12px 0;
				text-decoration: none !important;
				border-bottom: 0 !important;
				color: inherit !important;
				cursor: pointer;
			}
			.other-articles-list a:hover .other-article-title {
				text-decoration: underline;
			}
			.other-article-title {
				font-weight: 600;
			}
			.other-article-date {
				font-size: 0.85em;
				color: rgba(0, 0, 0, 0.55);
				margin-left: 12px;
				white-space: nowrap;
			}

			/* ‚úÖ Back button: bottom-left, no bullet, no underline */
			#header .bottom {
				text-align: left !important;
				padding-left: 15px !important;
				padding-bottom: 15px !important;
			}
			#nav-back ul,
			#nav-back ul li {
				list-style: none !important;
				margin: 0 !important;
				padding: 0 !important;
			}

			#back-link {
				text-decoration: none !important;
				border-bottom: 0 !important;
				box-shadow: none !important;
				font-size: 0.8em !important;
			}

			#back-link .icon:before {
				margin-right: 5px !important;
				font-size: 1em !important;
			}

			#nav-back ul li a,
			#nav-back ul li a span.icon:before {
				color: rgba(255, 255, 255, 0.55) !important;
			}
			#nav-back ul li a:hover,
			#nav-back ul li a:hover span.icon:before {
				color: #fff !important;
				text-decoration: none !important;
				border-bottom: 0 !important;
			}

			#nav-back ul li a:before,
			#nav-back ul li a:after {
				background: transparent !important;
				box-shadow: none !important;
				opacity: 0 !important;
			}

			/* ‚úÖ Revert footer bar styling back to default (non-blue, black text) */
			#footer,
			#footer::after {
				background: none !important;
				content: none !important;
			}
			#footer {
				position: static !important;
				overflow: visible !important;
				height: 70px;
				padding: 0 !important;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			#footer .copyright {
				margin: 0 !important;
			}
			#footer,
			#footer * {
				color: #000 !important;
			}
			#footer a {
				color: #000 !important;
				border-bottom-color: rgba(0, 0, 0, 0.35) !important;
			}
			#footer a:hover {
				border-bottom-color: rgba(0, 0, 0, 0.7) !important;
			}

			/* ‚úÖ PRESET SECTION (hide until we jump instantly into position) */
			html[data-prejump] {
				scroll-behavior: auto !important;
			}
			html[data-prejump] body {
				visibility: hidden;
			}

			/* ‚úÖ Latest article card (same layout as admin version) */
			.latest-article {
				max-width: 900px;
				margin: -50px auto 0;      /* pulled up under strip, like admin */
				padding: 0 30px;
				box-sizing: border-box;
				text-align: left;
			}
			.latest-article .card {
				border: 1px solid rgba(0,0,0,0.10);
				border-radius: 14px;
				box-shadow: 0 10px 22px rgba(0, 0, 0, 0.06);
				overflow: hidden;
				background: #fff;
			}
			.latest-article .hero {
				height: 330px;              /* desktop height */
				position: relative;
				overflow: hidden;
				background: linear-gradient(135deg, #00ADEE 0%, #008ACD 100%);
				background-size: cover;
				background-position: center;
				background-repeat: no-repeat;
			}
			.latest-article .hero::before,
			.latest-article .hero::after {
				content: "";
				position: absolute;
				inset: 0;
				pointer-events: none;
				z-index: 0;
			}
			.latest-article .hero::before {
				background: linear-gradient(
					135deg,
					rgba(0, 173, 238, 0.78) 0%,
					rgba(255, 255, 255, 0.35) 50%,
					rgba(0, 138, 205, 0.78) 100%
				);
			}
			.latest-article .hero::after {
				background:
					radial-gradient(circle at 0% 100%,
						rgba(0, 173, 238, 0.8) 0%,
						rgba(0, 173, 238, 0.8) 22%,
						rgba(0, 173, 238, 0.6) 30%,
						rgba(0, 173, 238, 0.3) 38%,
						rgba(0, 173, 238, 0) 46.2%
					),
					radial-gradient(circle at 100% 0%,
						rgba(255, 255, 255, 0.10) 0%,
						rgba(255, 255, 255, 0.10) 16%,
						rgba(255, 255, 255, 0.07) 23%,
						rgba(255, 255, 255, 0.04) 30%,
						rgba(255, 255, 255, 0.02) 36%,
						rgba(255, 255, 255, 0) 41.8%
					),
					linear-gradient(
						135deg,
						rgba(0, 138, 205, 0.75) 0%,
						rgba(0, 138, 205, 0.75) 100%
					);
			}
			.latest-article .hero-inner {
				position: relative;
				z-index: 1;
				height: 100%;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 22px;
				box-sizing: border-box;
				text-align: center;
			}
			.latest-article .hero-title {
				color: #fff;
				font-size: 1.6em;
				line-height: 1.15;
				margin: 0;
				text-shadow: 0 4px 14px rgba(0,0,0,0.22);
				word-break: break-word;
				max-width: 92%;
			}
			.latest-article .body {
				padding: 22px 22px 20px;
			}
			.latest-article .meta {
				display: flex;
				gap: 10px;
				flex-wrap: wrap;
				align-items: center;
				margin: 0 0 14px 0;
				color: rgba(0,0,0,0.55);
				font-size: 0.9em;
			}
			.latest-article .tags {
				display: flex;
				gap: 8px;
				flex-wrap: wrap;
				margin-top: 10px;
			}
			.latest-article .tag-pill {
				border: 1px solid rgba(0,0,0,0.10);
				border-radius: 999px;
				padding: 6px 10px;
				font-size: 0.85em;
				background: rgba(0,0,0,0.03);
				color: rgba(0,0,0,0.7);
			}

			/* ‚úÖ NEW: make the article 10px narrower than the borders on each side */
			#latest-article-mount.latest-article {
				padding-left: 40px !important;  /* was 30px */
				padding-right: 40px !important; /* was 30px */
			}

			/* ‚úÖ FORCE: white article card 5px from each side and 20px gap below */
			#latest-article-mount.latest-article {
				max-width: none !important;
				width: 100% !important;
				padding: 0 20px !important;             /* 20px left + 20px right */
				box-sizing: border-box !important;
				margin: -50px 0 20px !important;        /* ‚¨ÖÔ∏è bottom margin = 20px */
			}

			#latest-article-mount.latest-article .card {
				width: 100% !important;
				margin: 0 !important;
				box-sizing: border-box !important;
			}

			/* üî• FINAL OVERRIDE: force hero height to 330px in card */
			#latest-article-mount.latest-article .hero {
				height: 330px !important;
			}

			/* üì± Mobile tweaks */
			@media screen and (max-width: 736px) {
				/* hero 25% shorter (330px ‚Üí 247.5px) */
				.latest-article .hero,
				#latest-article-mount.latest-article .hero {
					height: calc(330px * 0.75) !important;
				}

				/* üëâ article box 10px wider each side (20px ‚Üí 5px padding), keep 20px gap below */
				#latest-article-mount.latest-article {
					padding: 0 5px !important;
					margin: -50px 0 20px !important;
				}
			}
		</style>
	</head>

	<body class="is-preload">

		<!-- Header -->
		<div id="header">
			<div class="top">
				<div id="logo">
					<span class="image"><img src="pinparklogo.png" alt="PinPark" /></span>
				</div>

				<nav id="nav">
					<ul>
						<li><a href="?section=current" id="current-link"><span class="icon solid fa-file-alt">Selected Article</span></a></li>
						<li><a href="?section=other" id="other-link"><span class="icon solid fa-list">Other Articles</span></a></li>
					</ul>
				</nav>
			</div>

			<div class="bottom">
				<nav id="nav-back">
					<ul>
						<li><a href="index.html" id="back-link"><span class="icon solid fa-arrow-left">Back</span></a></li>
					</ul>
				</nav>
			</div>
		</div>

		<!-- Main -->
		<div id="main">
			<!-- ‚úÖ Top strip only -->
			<section id="current" class="one dark cover">
				<div class="container">
					<header></header>
				</div>
			</section>

			<!-- ‚úÖ Positioned like admin version -->
			<div class="pinpark-under-strip">
				<header class="articles-under-logo">
					<!-- hidden heading, spacing only ‚Äì title comes from the card hero -->
					<h2 id="current-article-title" style="visibility: hidden;">Selected Article</h2>
				</header>

				<p class="articles-paragraph" id="current-article-fallback">
					Failed to load current article
				</p>

				<!-- ‚úÖ Latest article card mounts here -->
				<div id="latest-article-mount" class="latest-article"></div>
			</div>

			<section id="other" class="two">
				<div class="container">
					<header><h2>Other Articles</h2></header>

					<p class="other-paragraph" id="other-articles-fallback">
						No other articles to display
					</p>

					<!-- ‚úÖ Other published articles will be listed here -->
					<div id="other-articles-list"></div>
				</div>
			</section>
		</div>

		<div id="footer">
			<ul class="copyright">
				<li>&copy; 2025 PinPark. All rights reserved</li>
			</ul>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

		<!-- ‚úÖ Load latest + other published articles from Firestore -->
		<script type="module">
			import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
			import {
				getFirestore,
				collection,
				query,
				where,
				orderBy,
				limit,
				getDocs
			} from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

			const firebaseConfig = {
				apiKey: "AIzaSyBBOnsA7zbwoJ7sJFGIOuuJvpYWTHaBW4Q",
				authDomain: "pinpark-1fcb3.firebaseapp.com",
				projectId: "pinpark-1fcb3",
				storageBucket: "pinpark-1fcb3.firebasestorage.app",
				messagingSenderId: "677372487037",
				appId: "1:677372487037:web:5dcd5e788874aca5851814",
				measurementId: "G-LJN7NRFFX4"
			};

			const app = initializeApp(firebaseConfig);
			const db  = getFirestore(app);

			let _allArticles = [];
			let _currentArticleId = null;

			function formatDate(ts) {
				try {
					const d = ts && typeof ts.toDate === "function" ? ts.toDate() : new Date(ts);
					if (!d || isNaN(d.getTime())) return "";
					return d.toLocaleDateString("en-GB", {
						day: "2-digit",
						month: "short",
						year: "numeric"
					});
				} catch (_) {
					return "";
				}
			}

			function renderArticleCard(article) {
				const mount = document.getElementById("latest-article-mount");
				if (!mount || !article) return;

				const title = (article.title || "").trim() || "Untitled";
				const hero  = article.heroImageDataUrl || null;
				const html  = (article.renderedHtml || "").trim();
				const tags  = Array.isArray(article.tags) ? article.tags : [];

				mount.innerHTML = `
					<div class="card">
						<div class="hero" id="latest-hero">
							<div class="hero-inner">
								<h1 class="hero-title">${title}</h1>
							</div>
						</div>
						<div class="body">
							<div class="meta">
								<span>${formatDate(article.publishedAt || article.createdAt) || ""}</span>
								<span>‚Ä¢</span>
								<span>PinPark</span>
							</div>
							<div class="content" id="latest-content">
								${html || "<p></p>"}
							</div>
							<div class="tags">
								${tags.slice(0, 12).map(t => `<span class="tag-pill">${t}</span>`).join("")}
							</div>
						</div>
					</div>
				`;

				if (hero) {
					const heroEl = document.getElementById("latest-hero");
					if (heroEl) heroEl.style.backgroundImage = `url('${hero}')`;
				}

				// ‚úÖ also set the (hidden) page heading to match the selected article
				const h2 = document.getElementById("current-article-title");
				if (h2) h2.textContent = title;

				// ‚úÖ hide the placeholder once we have a real article
				const fallback = document.getElementById("current-article-fallback");
				if (fallback) fallback.style.display = "none";
			}

			function renderOtherArticles(articles) {
				const listEl    = document.getElementById("other-articles-list");
				const fallback  = document.getElementById("other-articles-fallback");

				if (!listEl) return;

				if (!articles || !articles.length) {
					listEl.innerHTML = "";
					if (fallback) fallback.style.display = "block";
					return;
				}

				if (fallback) fallback.style.display = "none";

				const itemsHtml = articles.map(a => {
					const title = (a.title || "").trim() || "Untitled";
					const date  = formatDate(a.publishedAt || a.createdAt);
					const id    = a.id;

					return `
						<li>
							<a href="#" data-article-id="${id}">
								<span class="other-article-title">${title}</span>
								${date ? `<span class="other-article-date">${date}</span>` : ""}
							</a>
						</li>
					`;
				}).join("");

				listEl.innerHTML = `
					<ul class="other-articles-list">
						${itemsHtml}
					</ul>
				`;

				// click entire row to select that article
				const links = listEl.querySelectorAll('a[data-article-id]');
				links.forEach(link => {
					link.addEventListener('click', (e) => {
						e.preventDefault();
						const id = link.getAttribute('data-article-id');
						if (!id) return;

						const article = _allArticles.find(a => a.id === id);
						if (!article) return;

						_currentArticleId = article.id;
						// current = clicked, others = all except current
						const others = _allArticles.filter(a => a.id !== _currentArticleId);

						renderArticleCard(article);
						renderOtherArticles(others);

						// Scroll back up to the selected article
						const currentSection = document.getElementById('current');
						if (currentSection) {
							currentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
						}
					});
				});
			}

			function renderAllArticles(preferredId) {
				if (!_allArticles.length) return;

				let current = _allArticles[0];
				if (preferredId) {
					const found = _allArticles.find(a => a.id === preferredId);
					if (found) current = found;
				}

				_currentArticleId = current.id;
				const others = _allArticles.filter(a => a.id !== _currentArticleId);

				renderArticleCard(current);
				renderOtherArticles(others);
			}

			async function loadPublishedAndRender() {
				try {
					const col = collection(db, "articles");

					let q = query(
						col,
						where("status", "==", "published"),
						orderBy("publishedAt", "desc"),
						limit(20)
					);

					let snap;
					try {
						snap = await getDocs(q);
					} catch (e) {
						console.warn("Falling back to createdAt index:", e);
						q = query(
							col,
							where("status", "==", "published"),
							orderBy("createdAt", "desc"),
							limit(20)
						);
						snap = await getDocs(q);
					}

					if (snap.empty) return;

					_allArticles = snap.docs.map(d => ({ id: d.id, ...d.data() }));

					renderAllArticles(_currentArticleId);
				} catch (e) {
					console.error("Failed to load articles:", e);
				}
			}

			loadPublishedAndRender();
		</script>

		<!-- ‚úÖ Section nav: remembers last section using sessionStorage -->
		<script>
			(function () {
				var nav = document.querySelector('#nav');
				if (!nav) return;

				const STORAGE_KEY = 'articlesLastSection';

				function hrefToId(href) {
					try {
						var u = new URL(href, window.location.href);
						return u.searchParams.get('section');
					} catch (_) {
						return null;
					}
				}

				function clearSectionFromUrl() {
					try {
						var u = new URL(window.location.href);
						if (!u.searchParams.has('section')) return;
						u.searchParams.delete('section');
						history.replaceState(null, '', u.toString());
					} catch (_) {}
				}

				var links = Array.prototype.slice.call(nav.querySelectorAll('a[href*="section="]'));
				var sections = links
					.map(function (a) {
						var id = hrefToId(a.getAttribute('href') || '');
						return id ? document.getElementById(id) : null;
					})
					.filter(Boolean);

				if (!links.length || !sections.length) return;

				var lockedUntil = 0;
				var forcedId = null;
				var forcedUntil = 0;

				function setActiveById(id) {
					links.forEach(function (a) {
						var linkId = hrefToId(a.getAttribute('href') || '');
						var on = linkId === id;
						a.classList.toggle('active', on);
						a.classList.toggle('active-locked', on && Date.now() < lockedUntil);
					});
				}

				function forceActive(id) {
					forcedId = id;
					forcedUntil = Date.now() + 15000;
					setActiveById(id);
				}

				function maybeReleaseForce(probeY) {
					if (!forcedId) return;
					var el = document.getElementById(forcedId);
					if (!el) {
						forcedId = null;
						forcedUntil = 0;
						return;
					}
					var r = el.getBoundingClientRect();
					if (r.top <= probeY && r.bottom > probeY) {
						forcedId = null;
						forcedUntil = 0;
					}
				}

				function scrollToId(id, instant) {
					var el = document.getElementById(id);
					if (!el) return;
					el.scrollIntoView({ behavior: instant ? 'auto' : 'smooth', block: 'start' });
				}

				links.forEach(function (a) {
					a.addEventListener('click', function (e) {
						var id = hrefToId(a.getAttribute('href') || '');
						if (!id) return;

						e.preventDefault();

						lockedUntil = Date.now() + 600;
						forceActive(id);

						scrollToId(id, false);
						clearSectionFromUrl();

						// ‚úÖ remember last section for refresh
						try {
							window.sessionStorage.setItem(STORAGE_KEY, id);
						} catch (_) {}
					});
				});

				var url = new URL(window.location.href);
				var initial = url.searchParams.get('section');
				var stored = null;
				try {
					stored = window.sessionStorage.getItem(STORAGE_KEY);
				} catch (_) {}

				if (initial && document.getElementById(initial)) {
					// ‚úÖ direct link with ?section=... ‚Üí respect URL
					document.documentElement.setAttribute('data-prejump', initial);

					scrollToId(initial, true);
					setActiveById(initial);
					clearSectionFromUrl();

					document.documentElement.removeAttribute('data-prejump');

					try {
						window.sessionStorage.setItem(STORAGE_KEY, initial);
					} catch (_) {}
				} else if (stored && document.getElementById(stored)) {
					// ‚úÖ no URL param, but we have a last section stored ‚Üí restore it
					scrollToId(stored, true);
					setActiveById(stored);
				} else {
					// ‚úÖ fall back to "current"
					setActiveById('current');
					try {
						window.sessionStorage.setItem(STORAGE_KEY, 'current');
					} catch (_) {}
				}

				var ticking = false;
				function onScroll() {
					if (ticking) return;
					ticking = true;

					requestAnimationFrame(function () {
						ticking = false;

						var probeY = window.innerHeight * 0.35;

						maybeReleaseForce(probeY);
						if (forcedId && Date.now() < forcedUntil) {
							setActiveById(forcedId);
							return;
						}

						var best = null;

						for (var i = 0; i < sections.length; i++) {
							var s = sections[i];
							var r = s.getBoundingClientRect();
							if (r.top <= probeY && r.bottom > probeY) {
								best = s;
								break;
							}
						}

						if (!best) best = sections[0];

						if (best && Date.now() >= lockedUntil) {
							setActiveById(best.id);
							// ‚úÖ update stored section when user scrolls into a new one
							try {
								window.sessionStorage.setItem(STORAGE_KEY, best.id);
							} catch (_) {}
						}
					});
				}

				window.addEventListener('scroll', onScroll, { passive: true });
				window.addEventListener('resize', onScroll);
				window.addEventListener('popstate', function () {
					var id = (new URL(window.location.href)).searchParams.get('section');
					if (id && document.getElementById(id)) {
						scrollToId(id, true);
						setActiveById(id);
						clearSectionFromUrl();
						try {
							window.sessionStorage.setItem(STORAGE_KEY, id);
						} catch (_) {}
					}
				});

				/* ‚ùå no initial onScroll(); we keep whatever we set above */
			})();
		</script>

	</body>
</html>
